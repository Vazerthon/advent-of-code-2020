const testInput = [
  '..##.......',
  '#...#...#..',
  '.#....#..#.',
  '..#.#...#.#',
  '.#...##..#.',
  '..#.##.....',
  '.#.#.#....#',
  '.#........#',
  '#.##...#...',
  '#...##....#',
  '.#..#...#.#',
];

const realInput = [
  '...#...###......##.#..#.....##.',
  '..#.#.#....#.##.#......#.#....#',
  '......#.....#......#....#...##.',
  '...#.....##.#..#........##.....',
  '...##...##...#...#....###....#.',
  '...##...##.......#....#...#.#..',
  '..............##..#..#........#',
  '#.#....#.........#...##.#.#.#.#',
  '.#..##......#.#......#...#....#',
  '#....#..#.#.....#..#...#...#...',
  '#.#.#.....##.....#.........#...',
  '......###..#....#..#..#.#....#.',
  '##.####...#.............#.##..#',
  '....#....#..#......#.......#...',
  '...#.......#.#..#.........##.#.',
  '......#.#.....###.###..###..#..',
  '##..##.......#.#.....#..#....#.',
  '..##.#..#....#.............##.#',
  '....#.#.#..#..#........##....#.',
  '.....####..#..#.###..#....##..#',
  '#.#.......#...##.##.##..#....#.',
  '.#..#..##...####.#......#..#...',
  '#...##.......#...####......##..',
  '...#.####....#.#...###.#.#...#.',
  '....#...........#.##.##.#......',
  '.....##...#.######.#..#....#..#',
  '.#....#...##....#..######....#.',
  '...#.....#...#####.##...#..#.#.',
  '.....#...##........##.##.##.###',
  '#.#..#....##....#......#....#.#',
  '......##...#.........#....#.#..',
  '###..#..##......##.#####.###.##',
  '#.....#..##.##....#...........#',
  '##..#.#..##..#.#.....#......#..',
  '.#.##.#..#.#....##..#..#....#..',
  '.#......##..##.#...#..#.......#',
  '#....##.##..###..###......##.#.',
  '....###..##.......#.###.#....#.',
  '..##........#........##.....#..',
  '.#..#.....#...####.##...##.....',
  '....#.#.#.....#.##..##.....#..#',
  '..............#.....#...#.....#',
  '.#.....#......###...........#.#',
  '.....#.#......#.##..#..........',
  '.#......###............#.#.##..',
  '.#.#....##.#..###.....#.##..#.#',
  '.......#.#.#..#..#..#...##..#.#',
  '.#.###...##.#.#.####.#.#...#...',
  '...#.#....#......##.##.#.......',
  '#...#.....##....#........##....',
  '.....###...#.##.#......##.#..#.',
  '..#...##.##.###..#..#......####',
  '.#.##.#..#.##..##..........##..',
  '..#.#.#..#.#.....#...###.....#.',
  '..#..#.#....#.##.............##',
  '.......#..###..#.#...#.....##.#',
  '####.#.#......#..#.##.........#',
  '..........#.....#..##......###.',
  '..#..............#...#..##.....',
  '......#.#.#..#.##.....####..##.',
  '.##.#..#.#....#.......#..#.....',
  '..#..#..#.##.#....###.#.#.#.#.#',
  '.....#....#......###..#........',
  '#.#.#..#...###.....#......#.##.',
  '...#.#....#.#......#........#..',
  '..#...###.#...#..#....##...#..#',
  '.###.##..#..#...###.#..#.####..',
  '#....#..##..##..#......#...##..',
  '#.#..#...#..#...###..#.#.##....',
  '##....#....##.####...#.#.###...',
  '##.#...#.......#.##.##....#...#',
  '..#.#..........#..#.#.#....#..#',
  '..#........#...#....#....#....#',
  '..#..#....#.......#........#...',
  '......#....#....##.#....#.#.##.',
  '.##...###.##.##....##.#...###..',
  '.....##..#.#.....###..#.....###',
  '....##.#.##...##..##........#..',
  '#...#..##.#.#....#......#...#..',
  '.###.##.#........#.####....#...',
  '#.##.....#..#...#..##.##..#.#..',
  '.....#.#..#....#..#...##.##.#..',
  '.#......#####...##...#.#.###.#.',
  '#......##....#.....#......##.#.',
  '#.#.##.###.#......#####..#.....',
  '........###.#...#..#.#........#',
  '....#....###..#.##.#...#....#..',
  '..........#..#.#....#...#.#...#',
  '#.##......###.#.#.#....####...#',
  '...#.#....#........##.#.....##.',
  '.....##..#.#.#..###...##...#...',
  '#...#...#....#....##........#..',
  '.....#.........##.#......#..#..',
  '#.....##..#.###.....#....##.##.',
  '...#..#..#.#........##...##.#.#',
  '..#..##.###.....#.#.....###.##.',
  '..###.........#...##.....###...',
  '...###...##.#...##....##.......',
  '.#.#..#...###..#.#....#....#...',
  '##..#.......#....#.#...#..#..#.',
  '..#......#....####..##..#.###.#',
  '..#.......##........#.#.#..#...',
  '.#.......#.##.#.##.#.......#..#',
  '###...#...#...#...#..#...#...##',
  '..#..........#..###........##..',
  '.##..#....##......##........#.#',
  '......#.##......#......##...#.#',
  '.#.#....#.#.#........#......#..',
  '.#.#..#....####..##...##....#..',
  '.#...##..#..#..#####....##.#...',
  '.##.#.#...#...#.#...#.##.#...#.',
  '###.#...##..#.###.#.....#.##.#.',
  '#.....#.###.#.#...#..#....#.#..',
  '..##..#....#......#.........###',
  '.#...#...##......#...#.####....',
  '..#.##...##..............#.#..#',
  '..#......#..##...........#..#.#',
  '..#####...#..#.......##...###..',
  '..##..#....#.#...###.#...#.....',
  '..#....#..#.#.......#..#.#.#...',
  '.##..#.#.....##....#.......#...',
  '...#.#..###...##....#....##..#.',
  '.....##..#...##.####....##...#.',
  '.......#.........#...#.##..####',
  '........###..#..#.##.###..#....',
  '.#.#..#.##.##.........#...#....',
  '.###......#.....#....##....####',
  '.##..##...........#.....#.....#',
  '#.#.#.#.#.#.##..#.#.#..#.##....',
  '.##.##...##..#....##..###..####',
  '#..##.#......#...###.........#.',
  '#..#...#..##..#..##.....##...#.',
  '#...##..#...##.#.###.#...#.....',
  '.###.....#.......#...#.##.###.#',
  '..........#.#......#...###...##',
  '..##....#.#..#....#.###...#..##',
  '#.#..#....##.##..##.........##.',
  '#.....#.##.###.#..#....##...#..',
  '...#........##...#..###..######',
  '#..#.#.#.#...#....#....###.#..#',
  '...##.##.##.....##..#........#.',
  '..#.#....#..#.......#...##.##.#',
  '###.##.......##..#.####...#.#..',
  '....#.#.....##.....#.#.##...#..',
  '.#..##..#.....#.#..#...#..#..#.',
  '.###....##...#......#.....#....',
  '##.##.###......#...#...###.#...',
  '#...#.##...#.#....##.....####..',
  '#.#.#.#...###...##.............',
  '..#....#.....##.#...#......#...',
  '....#...#......#...#..#...#.#..',
  '.###..#.....#..#...#....#...#..',
  '..#...#.#..###.......#..#.#...#',
  '#...###.##.....#....#..#.#..##.',
  '...#.##.#.##......#.#.#.##.....',
  '........####...##...##..#....#.',
  '.#.#....#....#.#...##.###...##.',
  '#.#...###.#.#.#....#....#.#....',
  '.####.#..#.#....#..#.#..#..#...',
  '#####...#...#...#....#.#.#..##.',
  '..###.##.###...#..........#.##.',
  '##.....#...#....###..###.#.#.#.',
  '#..##.#..#..#..#...#.#...###..#',
  '##....#.#...##......#.#...#...#',
  '.##..........#.#....#...#.##..#',
  '....#....####.#.####......#.###',
  '..##.#.....####.#.####.......#.',
  '#.##.##.#.....#.##......##...#.',
  '......###..#.....#.....##......',
  '..#..#....#.#...#.....#......##',
  '##..#..#..###.#.#..#..##.....#.',
  '#....#.#.....#####...#.#.......',
  '.....#..#....#.#.#..#...#...#..',
  '............#.##......##.##.#.#',
  '....#...#.#........###....#....',
  '..#..#...###.#....##..#..###.##',
  '#.##....#...#.....##..#.##.#...',
  '...##..###...#.#.....##.#......',
  '.#..#.##.#####..#.......#..###.',
  '...#.##...###.....####.#.#.....',
  '.#......##.#.#.#.#.##.#.....#..',
  '..#.##.#..##.......#.#.....##..',
  '..................#....#...#...',
  '.##.#..#.#.#..#.......#.#..##.#',
  '....#........#......#..####..#.',
  '#...#...##..##.#..#.......##...',
  '#..#..#..#..#........####..#.#.',
  '..#.#......#..#.##.##.#.#...#.#',
  '...#..#......#.#.###.#.##..##..',
  '..#...##.....#..#...##..#.#....',
  '#.........#....#..#....##.##..#',
  '..#..#.#....#..#...#.##.....#..',
  '...#..#...#.#.....#..##..#.#...',
  '....#........#.#....##..##..#..',
  '#.....#.#..#.......#.##.....#..',
  '.#.###.###...##...##..###...#..',
  '.##.##.......#.#......#.....#.#',
  '...#....##....#..#..........#.#',
  '..#.##.........#.#.....#.....#.',
  '...#.##..##.......##..##...#...',
  '#.##......##.##..#.....##...##.',
  '#.#.#..##...#.#............#.#.',
  '....#.....#......##...#.#.....#',
  '...#.#......#.#...###.......#..',
  '......##..###....#.#...#.#####.',
  '..#..#.#.#...##.#...###..##..#.',
  '##.##.#.#.##.#..#....#...#...#.',
  '#..#....######.##.#...#...#.#..',
  '.#..#.##....#..#.#.......#....#',
  '....#....#......##....##.#.#...',
  '.###......#..#..#.......####..#',
  '.#.#.....#..###...........##...',
  '.##..##.##.....####..#..#..##..',
  '..#..##.#......#...###.##..#.#.',
  '....##..#.....###..#.##....##.#',
  '#..#......#....#.........#.....',
  '.#...#.....#.#..#..##....#.....',
  '.##..#...#..##.#..#...........#',
  '..#..##........##.......#..#...',
  '#.....#....#....#.#.#...##.#...',
  '...#...#.#.#..#.##.#.#...#.....',
  '..#..#.#....#....###....#.#.#..',
  '...###..#...#..#....#.....#....',
  '...#...#.#..#.....#...###......',
  '##......#..........#.#.#..#.#.#',
  '....#.....#.....#..#..#.#.#.#..',
  '...####...#.##...#.#..#....#.#.',
  '#.##........##.............#.##',
  '#.#.#.#.#.....................#',
  '.#.###....#..##.##.##....#.....',
  '#.#...#.####.###...#..#..#.#...',
  '.##...#..###.......##..#.#.....',
  '#.#.#.#...#...#.##.....#.......',
  '.##.#.#.#......####..#.#.......',
  '###..........#......#...##...#.',
  '.........##...#.##...#.#.......',
  '...#.#.....#...#..#...#..##..#.',
  '.#..###...#.#.........###....#.',
  '##..#...#........#.........##..',
  '.....#...#.#...#.#.#...........',
  '..#....##...#.#..#..#.##....##.',
  '.##....#.#.....##.#..#..#...##.',
  '..##......#.#...#.#.......##.#.',
  '##...#..#...##.#........#.##...',
  '#......#.##..#.#..#.###.......#',
  '#.#...#.....#.#......#.#.#.....',
  '#.....#..#.......#....##.#.#..#',
  '###.#....#..##.#.##....#....#..',
  '#.##.##....#.#..#.#...#....#...',
  '####...#####...#.....#....##.#.',
  '....#.#...#.#.##.#.#.##.#.#.###',
  '#.....##.#.....#.#......#.#..#.',
  '.#....##.#..#........#...##.#..',
  '......#...#....##....##....##..',
  '..###.....#....##.#...#..#.....',
  '#....##...##.##..##.#...#...#..',
  '#..#...#...#.#....##..#.#....#.',
  '......................#.....#..',
  '.#..#...#.........#....##...###',
  '.##.#.#...##...#...#...#..#....',
  '.#.###....#.#............##..#.',
  '###..##.#.#.#.#....##...#......',
  '.##................####...##.##',
  '.#.#.........##....#.#.##.##.#.',
  '....#...#...#...##...#.##.#..#.',
  '.#.#........#..##.....#..#....#',
  '##.#..#.#....#.....#...#...#...',
  '.#...##....#.....##....#..#.#.#',
  '####.....#..#....#......###.##.',
  '##..##.#....###.....#...#......',
  '.##.#...#.....#.#..#.#..#.#...#',
  '.....#.#..#..#..###.#...###.#..',
  '.#.#.##.#..#.#..#...#..#.......',
  '..#.....#....#.##.##.##.......#',
  '.#..##....###...#..............',
  '#....#...#.#.......#....##.#...',
  '....#.#..##.#....#..#.#....#.#.',
  '#.........##...#.#.............',
  '#.#.......##.....#...##..##.#.#',
  '.......#....#..##...#..#######.',
  '.#.#...##........#..#.....#.#..',
  '.#.......#..#......#.##.##...##',
  '.........#............#....#..#',
  '.#......#...##...##...#....###.',
  '.........#...#.#.###.......#...',
  '###.#..#.#.#.#......##...#.#...',
  '.#.........##.#....###....#.#..',
  '#.#....#..#.##.#..#....##...#..',
  '###.#...#..#..##........#.###..',
  '.....#....#..#........#..#.##.#',
  '..#.....##......#....#..#.#.#..',
  '.#.........#.....#.....#.......',
  '......#....#.###..#.#....#....#',
  '..#.#..#.#.###.........#..#..#.',
  '..#..#.#.#.........#....##.#.#.',
  '#.......#........##...##....#..',
  '##..#..#...###...#..##..#..#.#.',
  '##..#..#....#.#..##..#..#.#..#.',
  '..##.....##.#..#.#........###..',
  '..#.#..#..##........#...#....##',
  '.##..#....##..#..#..#..#.#....#',
  '#....#.....##........#.....#.##',
  '......#....#.#..#......#.##....',
  '.......#..#..#......##.........',
  '......#...#..##.....#......#..#',
  '#..#..#....##....#........##..#',
  '##....#...#.#.....#####........',
  '...#.#..#.#.##.#.##..##...#....',
  '..#..#..#..#..#....#..#..##...#',
  '.#.....#....##.##....##.....#..',
  '#...#.....#.....#.#...#.#....#.',
  '.###...#..##....#..#...#.###...',
  '....#..##..#.......#.##.##..###',
  '#.......##.....#.......#.#...##',
  '#.....#.#.#....#.#......#.#.#..',
  '..##.....#..###......##........',
  '.....#...#..##....#......#.....',
  '#..#..#....#.#...#..###.......#',
  '.....#.....#....#..#...#.#..##.',
  '#####........#...#..#..##..#.#.',
  '.#..#...#.##....#.#..#......###',
  '#.###.#..#.....##..##....#...#.',
  '.#...#.#####....##..........##.',
];

const stringToCharArray = (string) => string.split('');

const getXCoord = (x, rowLength) => {
  return x <= rowLength - 1 ? x : getXCoord(x - rowLength, rowLength);
};

const valueAtCoordFor = (grid) => (x, y) =>
  grid[y][getXCoord(x, grid[0].length)];

const getTreesOnSlope = (input, right, down) => {
  const grid = input.map(stringToCharArray);
  const valueAtCoord = valueAtCoordFor(grid);

  const trees = [];
  for (let x = 0, y = 0; y < input.length; x += right, y += down) {
    trees.push(valueAtCoord(x, y));
  }

  return trees.filter((x) => x === '#').length;
}

const one = (input) => () => {
  return getTreesOnSlope(input, 3, 1)
};

const two = (input) => () => {
  return (
    getTreesOnSlope(input, 1, 1)
    *
    getTreesOnSlope(input, 3, 1)
    *
    getTreesOnSlope(input, 5, 1)
    *
    getTreesOnSlope(input, 7, 1)
    *
    getTreesOnSlope(input, 1, 2)
  )
};

export const partOne = one(realInput);
export const partTwo = two(realInput);
